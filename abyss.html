<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Abismo — Olhos Sinistros</title>
<style>
html,body{
  height:100%;
  margin:0;
  background:#000;
  overflow:hidden;
  cursor: default;
}

#stage{
  position:fixed;
  inset:0;
  overflow:hidden;
  touch-action:none;
}

.eye{
  position:absolute;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  transform:translate(-50%,-50%);
}

.sclera{
  position:relative;
  display:block;
  background: radial-gradient(ellipse at 30% 30%, #fff 0%, #f2f2f2 35%, #d9d9d9 100%);
  box-shadow: inset 0 3px 10px rgba(0,0,0,0.3),
              0 6px 20px rgba(0,0,0,0.5);
  overflow:hidden;
  transform-origin: center center;
  clip-path: polygon(
    50% 0%,
    85% 15%,
    100% 50%,
    85% 85%,
    50% 100%,
    15% 85%,
    0% 50%,
    15% 15%
  );
  border-radius: 30% / 50%;
}

.pupil{
  position:absolute;
  left:50%;
  top:50%;
  width:25%;
  height:25%;
  transform:translate(-50%,-50%);
  border-radius:50%;
  background: radial-gradient(circle at 30% 30%, #111 0%, #000 50%);
  box-shadow: 0 0 16px rgba(0,0,0,0.7), 0 0 24px rgba(255,20,50,0.1);
  transition: transform 0.06s linear;
  will-change: transform;
}

.sclera::before{
  content:'';
  position:absolute;
  inset:0;
  border-radius:inherit;
  box-shadow: 0 0 25px rgba(255,20,50,0.15);
  pointer-events:none;
  mix-blend-mode:screen;
}

.sclera::after{
  content:''; 
  position:absolute;
  left:0;
  width:100%;
  height:50%;
  background: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, transparent 100%);
  pointer-events:none;
  transform-origin:center top;
  transition: transform 0.2s;
  bottom:0;
  transform:rotateX(180deg);
}

.eye.size-small .sclera{ width:50px; height:35px; }
.eye.size-medium .sclera{ width:90px; height:55px; }
.eye.size-large .sclera{ width:130px; height:75px; }

/* Estilo do player de áudio no meio da tela */
#audioPlayer{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  z-index:1000;
  background:rgba(0,0,0,0.5);
  border-radius:8px;
  padding:8px;
}
</style>
</head>
<body>
<div id="stage"></div>

<audio id="audioPlayer" controls autoplay>
  <source src="NULL.mp3" type="audio/mpeg">
  Seu navegador não suporta o elemento de áudio.
</audio>

<script>
(function(){
  const stage=document.getElementById('stage');
  const audioPlayer = document.getElementById('audioPlayer');

  const EYE_COUNT=30;
  const SIZES=['size-small','size-medium','size-large'];
  let eyes=[];
  let pointer={x:window.innerWidth/2, y:window.innerHeight/2};

  function randomRange(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

  function makeEyes(count){
    stage.innerHTML='';
    eyes=[];
    for(let i=0;i<count;i++){
      const el=document.createElement('div');
      const sclera=document.createElement('div');
      const pupil=document.createElement('div');
      el.className='eye '+SIZES[randomRange(0,SIZES.length-1)];
      sclera.className='sclera';
      pupil.className='pupil';
      sclera.appendChild(pupil);
      el.appendChild(sclera);

      const padding=50;
      const x=randomRange(padding, window.innerWidth-padding);
      const y=randomRange(padding, window.innerHeight-padding);
      el.style.left=x+'px';
      el.style.top=y+'px';

      const deform = randomRange(-8,8);
      sclera.style.transform=`rotate(${deform}deg)`;

      stage.appendChild(el);

      const rect = sclera.getBoundingClientRect();
      const maxOffset = Math.min(rect.width,rect.height)*0.25;
      const blinkTimer = randomRange(2000,8000);
      const glowIntensity = Math.random()*0.15 + 0.05;

      eyes.push({el,sclera,pupil,cx:x,cy:y,maxOffset,blinkTimer,blinkElapsed:0,glowIntensity});
    }
  }

  function updatePupils(){
    for(const e of eyes){
      const dx = pointer.x - e.cx;
      const dy = pointer.y - e.cy;
      const angle = Math.atan2(dy,dx);
      const dist = Math.hypot(dx,dy);
      const factor = Math.min(1,150/(dist+0.0001));
      const offset = e.maxOffset*factor;
      const px=Math.cos(angle)*offset;
      const py=Math.sin(angle)*offset;
      e.pupil.style.transform=`translate(calc(-50% + ${px}px), calc(-50% + ${py}px))`;
    }
  }

  function onPointerMove(x,y){ pointer.x=x; pointer.y=y; updatePupils(); }

  window.addEventListener('mousemove', e=>onPointerMove(e.clientX,e.clientY));
  window.addEventListener('touchmove', e=>{
    e.preventDefault();
    const t=e.touches[0];
    if(t) onPointerMove(t.clientX,t.clientY);
  },{passive:false});

  function regen(){
    const area=window.innerWidth*window.innerHeight;
    const base=Math.max(12, Math.round(area/(1200*600)*EYE_COUNT));
    makeEyes(base);
    updatePupils();
  }
  window.addEventListener('resize', regen);
  regen();

  let t0=performance.now();
  function animate(){
    const t=performance.now();
    const elapsed=(t-t0)/1000;

    for(const e of eyes){
      const dx=pointer.x-e.cx;
      const dy=pointer.y-e.cy;
      const angle=Math.atan2(dy,dx);
      const dist=Math.hypot(dx,dy);
      const factor=Math.min(1,150/(dist+0.0001));
      const offset=e.maxOffset*factor;
      const wobbleX=Math.cos(elapsed*randomRange(3,7)+e.cx)*randomRange(1,2);
      const wobbleY=Math.sin(elapsed*randomRange(3,7)+e.cy)*randomRange(1,2);
      const px=Math.cos(angle)*offset + wobbleX;
      const py=Math.sin(angle)*offset + wobbleY;
      e.pupil.style.transform=`translate(calc(-50% + ${px}px), calc(-50% + ${py}px))`;

      e.blinkElapsed += 16;
      if(e.blinkElapsed>e.blinkTimer){
        e.sclera.style.transform+=' scaleY(0.05)';
        setTimeout(()=>{ 
          e.sclera.style.transform=e.sclera.style.transform.replace(' scaleY(0.05)',''); 
        },120);
        e.blinkElapsed=0;
        e.blinkTimer=randomRange(2000,8000);
      }

      const glow = 0.05 + Math.sin(elapsed*2 + e.cx)*0.05;
      e.sclera.style.boxShadow = `inset 0 3px 10px rgba(0,0,0,0.3),
                                  0 6px 20px rgba(255,20,50,${glow})`;
    }

    requestAnimationFrame(animate);
  }
  requestAnimationFrame(animate);

  // --------- Player de áudio desaparecendo após clique ---------
  function hidePlayer() {
    if(audioPlayer){
      audioPlayer.style.display = 'none';
      audioPlayer.style.pointerEvents = 'none';
    }
  }

  // Clique em qualquer lugar ou no próprio player
  window.addEventListener('click', hidePlayer, {once:true});
  window.addEventListener('touchstart', hidePlayer, {once:true});
  audioPlayer.addEventListener('click', hidePlayer, {once:true});
  audioPlayer.addEventListener('touchstart', hidePlayer, {once:true});

})();
</script>
</body>
</html>
